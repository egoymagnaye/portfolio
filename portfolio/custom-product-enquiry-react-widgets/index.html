<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if(!e)return localStorage.setItem('theme','light'),d.add('light');if("system"===e){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else d.add(e)}catch(e){}}()</script><title>Custom Product Enquiry Widgets Developed Using React</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="This is a sample meta description."/><meta property="og:url" content="https://egoymagnaye.com"/><meta property="og:title" content="Custom Product Enquiry Widgets Developed Using React"/><meta property="og:description" content="This is a sample meta description."/><meta property="og:image" content="https://cms.egoymagnaye.com/wp-content/uploads/2021/02/enquiry-featured-image.jpg"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="627"/><meta property="og:site_name" content="Egoy Magnaye | Portfolio"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/0fc370f302505660b0aa.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0fc370f302505660b0aa.css" data-n-g=""/><link rel="preload" href="/_next/static/css/a948aea025c001fe5f19.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a948aea025c001fe5f19.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-274e6b525957340b0588.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.daa7383ad2ab2e6757c1.js" as="script"/><link rel="preload" href="/_next/static/chunks/cb1608f2.c060290bec9c78d41bf3.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.fa36d27f7d7b64de1790.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-9e9cff3d9f4212e0a036.js" as="script"/><link rel="preload" href="/_next/static/chunks/ae51ba48.5fdd52c1eb8934f67dab.js" as="script"/><link rel="preload" href="/_next/static/chunks/9c6acb7e1cb5d034899bd31812f4cd0223d947e5.cad86647c1e28bf2c1b0.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/portfolio/%5Bslug%5D-b62cd7b34995a3172920.js" as="script"/></head><body class="bg-white dark:bg-gray-em300 transition duration-500"><div id="__next"><div><header class="container mx-auto max-w-screen-lg xl:max-w-screen-xl hidden md:block"><div class="flex justify-content items-center py-4 px-4"><div class="flex justify-start lg:w-0 sm:flex-1 relative z-0"><a class="inline-block text-center" href="/"><span class="sr-only">Egoy Magnaye Portfolio</span><svg class="fill-current w-12 text-red-em100 dark:text-yellow-em100" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M504.3 257.1v228c0 14.3-5.6 19.9-19.8 19.9H27.1c-14.2 0-19.8-5.6-19.8-19.9V28c0-14.4 5.5-20 19.8-20h457.4c14.2 0 19.8 5.6 19.8 19.9v229.2zm-271.4-81.8h-96.2c-1.9 0-3.8-.3-5.5.2-1.1.3-2.7 1.7-2.7 2.6-.2 8.9-.1 17.7-.1 27.3h76.3V235h-71c-2.2 0-5.3-1.1-5.4 2.9-.1 8.7 0 17.4 0 26.7h76.3v30h-76.4c0 8.3.3 15.9-.1 23.5-.2 4.7 1.5 5.9 6 5.9 31-.2 62.1-.1 93.1-.1 1.8 0 3.5-.3 5.6-.4v-7.2c0-25.1-.2-50.2.2-75.2.4-24.3 12.4-39.6 34.7-42.7 22.2-3.1 33.9 4.6 34.1 27.1v98.1h28.3v-6.9c0-25.5.1-50.9 0-76.4-.2-32.9 20.1-42.7 42.2-42.3 18.3.3 26.4 8.9 26.4 27v98.5h29.2v-7.1c0-27.3.1-54.6 0-81.9 0-6.5-.4-13-1-19.4-1.9-18.9-12.9-32-31.2-37-14.1-3.8-28.3-3.4-42.3 1-11.1 3.5-19.9 10.3-27.6 19.5-10.3-18.3-26.9-23.2-45.7-22.9-18.8.2-34.1 8.5-47.4 24 .2-9.5.2-16.4.2-24.4zm-149.2.1v147.9h29.6c.1-1.9.2-3.4.2-4.8V181c0-.9.3-2-.1-2.7-.6-1.1-1.7-2.7-2.6-2.7-8.9-.3-17.8-.2-27.1-.2z"></path></svg></a></div><nav class="md:flex"><ul class="flex sm:space-x-14"><li class="flex items-center"><a class="sm:text-base lg:text-lg text-gray-em300 dark:text-white" href="/">Home</a></li><li class="flex items-center relative"><button class="flex items-center focus:outline-none sm:text-base lg:text-lg text-gray-em300 dark:text-white"><span>Portfolio</span><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="text-lg ml-2 text-gray-em300 dark:text-white" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="48" d="M112 184l144 144 144-144"></path></svg></button><div class="absolute z-20 mt-10 -ml-4 transform px-0 w-screen max-w-md top-2.5 lg:ml-0 lg:left-1/2 md:-translate-x-1/2 menuDefault"><div class="rounded-lg shadow-md ring-1 ring-black ring-opacity-5 overflow-hidden bg-white dark:bg-gray-em100 transition duration-500"><ul class="px-8 py-5"></ul></div></div></li><li class="flex items-center"><a class="sm:text-base lg:text-lg text-gray-em300 dark:text-white" href="/about/">About</a></li><li class="flex items-center"><a class="sm:text-base lg:text-lg text-gray-em300 dark:text-white" href="/contact/">Contact</a></li><li class="flex items-center"><div class="flex justify-center"><button class="border-2 border-gray-em300 dark:border-yellow-em100 rounded-full h-10 w-10 flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-gray-300"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="w-10 text-2xl text-gray-em300 block dark:hidden" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M264 480A232 232 0 0132 248c0-94 54-178.28 137.61-214.67a16 16 0 0121.06 21.06C181.07 76.43 176 104.66 176 136c0 110.28 89.72 200 200 200 31.34 0 59.57-5.07 81.61-14.67a16 16 0 0121.06 21.06C442.28 426 358 480 264 480z"></path></svg><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="w-10 text-2xl text-yellow-em100 hidden dark:block" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 118a22 22 0 01-22-22V48a22 22 0 0144 0v48a22 22 0 01-22 22zm0 368a22 22 0 01-22-22v-48a22 22 0 0144 0v48a22 22 0 01-22 22zm113.14-321.14a22 22 0 01-15.56-37.55l33.94-33.94a22 22 0 0131.11 31.11l-33.94 33.94a21.93 21.93 0 01-15.55 6.44zM108.92 425.08a22 22 0 01-15.55-37.56l33.94-33.94a22 22 0 1131.11 31.11l-33.94 33.94a21.94 21.94 0 01-15.56 6.45zM464 278h-48a22 22 0 010-44h48a22 22 0 010 44zm-368 0H48a22 22 0 010-44h48a22 22 0 010 44zm307.08 147.08a21.94 21.94 0 01-15.56-6.45l-33.94-33.94a22 22 0 0131.11-31.11l33.94 33.94a22 22 0 01-15.55 37.56zM142.86 164.86a21.89 21.89 0 01-15.55-6.44l-33.94-33.94a22 22 0 0131.11-31.11l33.94 33.94a22 22 0 01-15.56 37.55zM256 358a102 102 0 11102-102 102.12 102.12 0 01-102 102z"></path></svg></button></div></li></ul></nav></div></header><header class="sm:container mx-auto fixed bottom-0 z-50 inset-x-0 md:hidden"><nav class="mx-4 my-6 p-6 rounded-lg shadow-lg ring-1 ring-black ring-opacity-5  bg-white dark:bg-gray-em100 transition duration-500 h-64 overflow-y-scroll menuDefault"><ul class="divide-y divide-black divide-opacity-10 dark:divide-white dark:divide-opacity-10"><li class="py-4"><a class="block focus:outline-none text-base font-bold text-gray-em300 dark:text-white" href="/">Home</a></li><li class="py-4"><button class="flex items-center w-full justify-between focus:outline-none text-base font-bold text-gray-em300 dark:text-white"><span>Portfolio</span><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="text-lg ml-2 text-gray-em300 dark:text-white" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="48" d="M112 184l144 144 144-144"></path></svg></button><ul class="divide-y divide-black divide-opacity-10 dark:divide-white dark:divide-opacity-10 px-2 dropdownDefault"></ul></li><li class="py-4"><a class="block focus:outline-none text-base font-bold text-gray-em300 dark:text-white" href="/about/">About</a></li><li class="py-4"><a class="block focus:outline-none text-base font-bold text-gray-em300 dark:text-white" href="/contact/">Contact</a></li></ul></nav><div class="px-2 py-4 bg-white dark:bg-gray-em100 shadow-2xl"><div class="flex items-center"><div class="flex-1"><button class="toggleMenuBtn hamburger hamburger--collapse p-0 flex mx-auto focus:outline-none false" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></button></div><div class="flex-1"><span class="flex items-center justify-center relative text-center mobile-logo"><a class="inline-block text-center" href="/"><span class="sr-only">Egoy Magnaye Portfolio</span><svg class="fill-current w-12 text-red-em100 dark:text-yellow-em100" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M504.3 257.1v228c0 14.3-5.6 19.9-19.8 19.9H27.1c-14.2 0-19.8-5.6-19.8-19.9V28c0-14.4 5.5-20 19.8-20h457.4c14.2 0 19.8 5.6 19.8 19.9v229.2zm-271.4-81.8h-96.2c-1.9 0-3.8-.3-5.5.2-1.1.3-2.7 1.7-2.7 2.6-.2 8.9-.1 17.7-.1 27.3h76.3V235h-71c-2.2 0-5.3-1.1-5.4 2.9-.1 8.7 0 17.4 0 26.7h76.3v30h-76.4c0 8.3.3 15.9-.1 23.5-.2 4.7 1.5 5.9 6 5.9 31-.2 62.1-.1 93.1-.1 1.8 0 3.5-.3 5.6-.4v-7.2c0-25.1-.2-50.2.2-75.2.4-24.3 12.4-39.6 34.7-42.7 22.2-3.1 33.9 4.6 34.1 27.1v98.1h28.3v-6.9c0-25.5.1-50.9 0-76.4-.2-32.9 20.1-42.7 42.2-42.3 18.3.3 26.4 8.9 26.4 27v98.5h29.2v-7.1c0-27.3.1-54.6 0-81.9 0-6.5-.4-13-1-19.4-1.9-18.9-12.9-32-31.2-37-14.1-3.8-28.3-3.4-42.3 1-11.1 3.5-19.9 10.3-27.6 19.5-10.3-18.3-26.9-23.2-45.7-22.9-18.8.2-34.1 8.5-47.4 24 .2-9.5.2-16.4.2-24.4zm-149.2.1v147.9h29.6c.1-1.9.2-3.4.2-4.8V181c0-.9.3-2-.1-2.7-.6-1.1-1.7-2.7-2.6-2.7-8.9-.3-17.8-.2-27.1-.2z"></path></svg></a></span></div><div class="flex-1"><div class="flex justify-center"><button class="border-2 border-gray-em300 dark:border-yellow-em100 rounded-full h-10 w-10 flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-gray-300"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="w-10 text-2xl text-gray-em300 block dark:hidden" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M264 480A232 232 0 0132 248c0-94 54-178.28 137.61-214.67a16 16 0 0121.06 21.06C181.07 76.43 176 104.66 176 136c0 110.28 89.72 200 200 200 31.34 0 59.57-5.07 81.61-14.67a16 16 0 0121.06 21.06C442.28 426 358 480 264 480z"></path></svg><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="w-10 text-2xl text-yellow-em100 hidden dark:block" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 118a22 22 0 01-22-22V48a22 22 0 0144 0v48a22 22 0 01-22 22zm0 368a22 22 0 01-22-22v-48a22 22 0 0144 0v48a22 22 0 01-22 22zm113.14-321.14a22 22 0 01-15.56-37.55l33.94-33.94a22 22 0 0131.11 31.11l-33.94 33.94a21.93 21.93 0 01-15.55 6.44zM108.92 425.08a22 22 0 01-15.55-37.56l33.94-33.94a22 22 0 1131.11 31.11l-33.94 33.94a21.94 21.94 0 01-15.56 6.45zM464 278h-48a22 22 0 010-44h48a22 22 0 010 44zm-368 0H48a22 22 0 010-44h48a22 22 0 010 44zm307.08 147.08a21.94 21.94 0 01-15.56-6.45l-33.94-33.94a22 22 0 0131.11-31.11l33.94 33.94a22 22 0 01-15.55 37.56zM142.86 164.86a21.89 21.89 0 01-15.55-6.44l-33.94-33.94a22 22 0 0131.11-31.11l33.94 33.94a22 22 0 01-15.56 37.55zM256 358a102 102 0 11102-102 102.12 102.12 0 01-102 102z"></path></svg></button></div></div></div></div></header><main><article><div class="container mx-auto max-w-screen-lg md:max-w-screen-sm lg:max-w-screen-md mt-20"><div class="m-4 text-center"><p class="Animation_fromTopHidden__36ZDc text-xs md:text-sm  text-gray-em300 dark:text-white break-words">React JS, React Context, React Hooks, Formik</p><h1 class="Animation_fromTopHidden__36ZDc text-4xl md:text-6xl font-semibold md:leading-tight text-gray-em300 dark:text-yellow-em100 mt-2 break-words">Custom Product Enquiry Widgets Developed Using React</h1><p class="Animation_fromBottomHidden__1g_tk text-base md:text-xl leading-relaxed mt-3 md:mt-4 text-gray-em300 dark:text-white">Developed for a home-improvement company in Australia. These three separated widgets are part of their website which provides a custom product enquiry process.</p><img src="https://cms.egoymagnaye.com/wp-content/uploads/2021/02/enquiry-featured-image.jpg" alt="" class="Animation_fromBottomHidden__1g_tk mt-6 rounded-2xl shadow-md"/></div></div><div class="container mx-auto max-w-screen-lg md:max-w-screen-md my-20 md:my-32"><div class="m-4 mb-6 Portfolio_portfolioContainer__ScUbZ darkModePortfolio"><h3>What is the main problem?</h3><p>This time, the problem will not come from the client but the development approach. The client only wants a separate enquiry form for each product. These forms work like an “add to cart” functionality in an e-commerce website. But instead of adding the products to the cart, they want their customers to add the products in the global enquiry email.</p><p><img src="https://cms.egoymagnaye.com/wp-content/uploads/2021/02/initial-enquiry-form.jpg" alt=""/></p><p><span data-preserver-spaces="true">The main enquiry form was generated using </span><a class="editor-rtfLink" href="https://contactform7.com/" target="_blank" rel="noopener">Contact Form 7</a>, a contact form generator in WordPress.</p><p><img src="https://cms.egoymagnaye.com/wp-content/uploads/2021/02/contact-form-page.jpg" alt=""/></p><p>I can just create separate enquiry forms in Contact Form 7 then add them to each product. I can also customize these forms to disable the form submission and just save the submitted values into some kind of storage like the Local Storage.</p><p>That would be a good solution, right? But there are features that the client wants that will just make the functionality development complicated.</p><p>First, the client wants a “cart” like widget where they can see the products that were added to their enquiries. For every product that was added and removed, the “cart” like widget needs to update as well.</p><p><img src="https://cms.egoymagnaye.com/wp-content/uploads/2021/02/inquiry-widget-header.jpg" alt=""/></p><p>Another feature, although this feature was not requested by the client. I want to add a section in the main contact form where the customers can see all the products they have added, the customers can also remove a product if they want. I think adding this feature will improve the user experience.</p><p><img src="https://cms.egoymagnaye.com/wp-content/uploads/2021/02/overall-enquiry.jpg" alt=""/></p><p>I’m sure you notice what will be the issue.</p><p>Each widget is separated but these widgets must communicate to each other to update their view or their UI. The widgets must share the same state so they will update in real-time.</p><p>You might notice as well that these widgets are located in a different part of the website, one in single product pages, the “cart” like widget is in the main header and the overall enquiries list is on the Contact page. They don’t share the same parent DOM element.</p><p>A little heads up! These widgets are built using React but if you know how React works, all the components are rendered to a parent DOM element by default.</p><p>Now let us go to the next section and talk about how I built the features and came up with a solution.</p><h3>How I built the application?</h3><p>I’m not saying that this is the correct way of doing this kind of customization but I just want to share how I did it. I know there are lots of ways how to accomplish this. Please understand that these are just an overview and not the complete process.</p><p>Let us talk about how I built each feature first and later how I connected each widget.</p><h5>The enquiry forms:</h5><p><span data-preserver-spaces="true">All the form data was dynamically generated by the back-end. The client website was using </span><a class="editor-rtfLink" href="https://www.advancedcustomfields.com/" target="_blank" rel="noopener"><span data-preserver-spaces="true">Advanced Custom Field</span></a><span data-preserver-spaces="true"> plugin, a plugin that provides custom fields or data. I think it’s better and much faster to use it than to build a custom form input generator.</span><br/><img src="https://cms.egoymagnaye.com/wp-content/uploads/2021/02/acf-form-generator.jpg" alt=""/></p><p>Then I used these form input data and integrate them with <a href="https://formik.org/" target="_blank" rel="noopener">Formik</a> so that I have a dynamic form for each product.</p><p><img src="https://cms.egoymagnaye.com/wp-content/uploads/2021/02/enquiry-selected.jpg" alt=""/></p><p>These forms do not need to send something, it just needs to update the state. I used React Context and React Hooks to control the global state instead of Redux state management package. If the customer submits the form, the submitted values will be saved to the global state.</p><h5>The “cart” like widget or the overview enquiry widget:</h5><p>This widget was located in the main header. This widget will show the total of enquiries the customer has and also the title of the items.<br/><img src="https://cms.egoymagnaye.com/wp-content/uploads/2021/02/overview-enquiry-w-items.png" alt=""/></p><p>Whenever a customer submits a product enquiry or removes an item, this widget will update.</p><p>This widget gets its data to the global state. This widget was built also using React but in separate parent DOM element.</p><h5>The overall enquiries list:</h5><p>This section was added to the main contact page. Before the customers submit their message, they can review their products. They can remove product items if they want.<br/><img src="https://cms.egoymagnaye.com/wp-content/uploads/2021/02/overall-enquiry-list.png" alt=""/></p><p>All the products that they have added will be included in the main contact form submission.</p><p>This was also rendered on a different parent DOM element, and it gets its data to the same global state as well.</p><h3>How the components communicate?</h3><p>So the question is how I connect these three components and make them share the same global state?</p><p>Well, React has a feature called <a href="https://reactjs.org/docs/portals.html" target="_blank" rel="noopener">Portals</a>, you can create different React components and attached them to a different parent element. Basically, this portal serves as a bridge to these separated components so they can still communicate (in a way).</p><p>In my case, I just created different portals by using the “createPortal” method and enclosed all the components into the context provider. By doing this, even though they are separated they will still share the global state.</p><p>To be honest, I can’t remember what is the exact reason why I came up with this approach. As far as I can remember, my first solution was to depend only on every update of my global state in Local Storage.</p><p>That solution was not working, I’m not sure why. When I tried testing it by adding a new product enquiry, the overview widget in the header was not updating in real-time. The overview widget will only update after the next product enquiry submission, some sort of a delayed update.</p><p>Well, I have deadlines to meet, I need a better solution and Portals help me with these issues.</p><h3>Limitations:</h3><ul><li>Form input generator was dependent on ACF.</li><li>There is no remove functionality on the overview widget.</li></ul></div></div></article></main><footer class="container mx-auto max-w-screen-lg xl:max-w-screen-xl mb-28 md:mb-0"><div class="flex flex-wrap items-end m-4"><div class="w-full md:w-1/2"><a class="inline-block text-center" href="/"><span class="sr-only">Egoy Magnaye Portfolio</span><svg class="fill-current w-9 text-red-em100 dark:text-yellow-em100" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M504.3 257.1v228c0 14.3-5.6 19.9-19.8 19.9H27.1c-14.2 0-19.8-5.6-19.8-19.9V28c0-14.4 5.5-20 19.8-20h457.4c14.2 0 19.8 5.6 19.8 19.9v229.2zm-271.4-81.8h-96.2c-1.9 0-3.8-.3-5.5.2-1.1.3-2.7 1.7-2.7 2.6-.2 8.9-.1 17.7-.1 27.3h76.3V235h-71c-2.2 0-5.3-1.1-5.4 2.9-.1 8.7 0 17.4 0 26.7h76.3v30h-76.4c0 8.3.3 15.9-.1 23.5-.2 4.7 1.5 5.9 6 5.9 31-.2 62.1-.1 93.1-.1 1.8 0 3.5-.3 5.6-.4v-7.2c0-25.1-.2-50.2.2-75.2.4-24.3 12.4-39.6 34.7-42.7 22.2-3.1 33.9 4.6 34.1 27.1v98.1h28.3v-6.9c0-25.5.1-50.9 0-76.4-.2-32.9 20.1-42.7 42.2-42.3 18.3.3 26.4 8.9 26.4 27v98.5h29.2v-7.1c0-27.3.1-54.6 0-81.9 0-6.5-.4-13-1-19.4-1.9-18.9-12.9-32-31.2-37-14.1-3.8-28.3-3.4-42.3 1-11.1 3.5-19.9 10.3-27.6 19.5-10.3-18.3-26.9-23.2-45.7-22.9-18.8.2-34.1 8.5-47.4 24 .2-9.5.2-16.4.2-24.4zm-149.2.1v147.9h29.6c.1-1.9.2-3.4.2-4.8V181c0-.9.3-2-.1-2.7-.6-1.1-1.7-2.7-2.6-2.7-8.9-.3-17.8-.2-27.1-.2z"></path></svg></a><p class="text-sm mt-4 text-gray-em300 dark:text-white">© 2021 Egoy Magnaye. All rights reserved. This website was built using Next.js, Tailwind, and other cool stuff.</p></div><div class="w-full md:w-1/2 mt-2"><div class="md:text-right"><a class="text-sm mt-2 text-gray-em300 dark:text-white" href="/sitemap/">Sitemap</a></div></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"portfolio":{"id":42,"date":"2021-02-14T15:44:38","slug":"custom-product-enquiry-react-widgets","title":"Custom Product Enquiry Widgets Developed Using React","description":"\u003ch3\u003eWhat is the main problem?\u003c/h3\u003e\n\u003cp\u003eThis time, the problem will not come from the client but the development approach. The client only wants a separate enquiry form for each product. These forms work like an \u0026#8220;add to cart\u0026#8221; functionality in an e-commerce website. But instead of adding the products to the cart, they want their customers to add the products in the global enquiry email.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cms.egoymagnaye.com/wp-content/uploads/2021/02/initial-enquiry-form.jpg\" alt=\"\" /\u003e\u003c/p\u003e\n\u003cp\u003e\u003cspan data-preserver-spaces=\"true\"\u003eThe main enquiry form was generated using \u003c/span\u003e\u003ca class=\"editor-rtfLink\" href=\"https://contactform7.com/\" target=\"_blank\" rel=\"noopener\"\u003eContact Form 7\u003c/a\u003e, a contact form generator in WordPress.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cms.egoymagnaye.com/wp-content/uploads/2021/02/contact-form-page.jpg\" alt=\"\" /\u003e\u003c/p\u003e\n\u003cp\u003eI can just create separate enquiry forms in Contact Form 7 then add them to each product. I can also customize these forms to disable the form submission and just save the submitted values into some kind of storage like the Local Storage.\u003c/p\u003e\n\u003cp\u003eThat would be a good solution, right? But there are features that the client wants that will just make the functionality development complicated.\u003c/p\u003e\n\u003cp\u003eFirst, the client wants a \u0026#8220;cart\u0026#8221; like widget where they can see the products that were added to their enquiries. For every product that was added and removed, the \u0026#8220;cart\u0026#8221; like widget needs to update as well.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cms.egoymagnaye.com/wp-content/uploads/2021/02/inquiry-widget-header.jpg\" alt=\"\" /\u003e\u003c/p\u003e\n\u003cp\u003eAnother feature, although this feature was not requested by the client. I want to add a section in the main contact form where the customers can see all the products they have added, the customers can also remove a product if they want. I think adding this feature will improve the user experience.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cms.egoymagnaye.com/wp-content/uploads/2021/02/overall-enquiry.jpg\" alt=\"\" /\u003e\u003c/p\u003e\n\u003cp\u003eI\u0026#8217;m sure you notice what will be the issue.\u003c/p\u003e\n\u003cp\u003eEach widget is separated but these widgets must communicate to each other to update their view or their UI. The widgets must share the same state so they will update in real-time.\u003c/p\u003e\n\u003cp\u003eYou might notice as well that these widgets are located in a different part of the website, one in single product pages, the \u0026#8220;cart\u0026#8221; like widget is in the main header and the overall enquiries list is on the Contact page. They don\u0026#8217;t share the same parent DOM element.\u003c/p\u003e\n\u003cp\u003eA little heads up! These widgets are built using React but if you know how React works, all the components are rendered to a parent DOM element by default.\u003c/p\u003e\n\u003cp\u003eNow let us go to the next section and talk about how I built the features and came up with a solution.\u003c/p\u003e\n\u003ch3\u003eHow I built the application?\u003c/h3\u003e\n\u003cp\u003eI\u0026#8217;m not saying that this is the correct way of doing this kind of customization but I just want to share how I did it. I know there are lots of ways how to accomplish this. Please understand that these are just an overview and not the complete process.\u003c/p\u003e\n\u003cp\u003eLet us talk about how I built each feature first and later how I connected each widget.\u003c/p\u003e\n\u003ch5\u003eThe enquiry forms:\u003c/h5\u003e\n\u003cp\u003e\u003cspan data-preserver-spaces=\"true\"\u003eAll the form data was dynamically generated by the back-end. The client website was using \u003c/span\u003e\u003ca class=\"editor-rtfLink\" href=\"https://www.advancedcustomfields.com/\" target=\"_blank\" rel=\"noopener\"\u003e\u003cspan data-preserver-spaces=\"true\"\u003eAdvanced Custom Field\u003c/span\u003e\u003c/a\u003e\u003cspan data-preserver-spaces=\"true\"\u003e plugin, a plugin that provides custom fields or data. I think it\u0026#8217;s better and much faster to use it than to build a custom form input generator.\u003c/span\u003e\u003cbr /\u003e\n\u003cimg src=\"https://cms.egoymagnaye.com/wp-content/uploads/2021/02/acf-form-generator.jpg\" alt=\"\" /\u003e\u003c/p\u003e\n\u003cp\u003eThen I used these form input data and integrate them with \u003ca href=\"https://formik.org/\" target=\"_blank\" rel=\"noopener\"\u003eFormik\u003c/a\u003e so that I have a dynamic form for each product.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cms.egoymagnaye.com/wp-content/uploads/2021/02/enquiry-selected.jpg\" alt=\"\" /\u003e\u003c/p\u003e\n\u003cp\u003eThese forms do not need to send something, it just needs to update the state. I used React Context and React Hooks to control the global state instead of Redux state management package. If the customer submits the form, the submitted values will be saved to the global state.\u003c/p\u003e\n\u003ch5\u003eThe \u0026#8220;cart\u0026#8221; like widget or the overview enquiry widget:\u003c/h5\u003e\n\u003cp\u003eThis widget was located in the main header. This widget will show the total of enquiries the customer has and also the title of the items.\u003cbr /\u003e\n\u003cimg src=\"https://cms.egoymagnaye.com/wp-content/uploads/2021/02/overview-enquiry-w-items.png\" alt=\"\" /\u003e\u003c/p\u003e\n\u003cp\u003eWhenever a customer submits a product enquiry or removes an item, this widget will update.\u003c/p\u003e\n\u003cp\u003eThis widget gets its data to the global state. This widget was built also using React but in separate parent DOM element.\u003c/p\u003e\n\u003ch5\u003eThe overall enquiries list:\u003c/h5\u003e\n\u003cp\u003eThis section was added to the main contact page. Before the customers submit their message, they can review their products. They can remove product items if they want.\u003cbr /\u003e\n\u003cimg src=\"https://cms.egoymagnaye.com/wp-content/uploads/2021/02/overall-enquiry-list.png\" alt=\"\" /\u003e\u003c/p\u003e\n\u003cp\u003eAll the products that they have added will be included in the main contact form submission.\u003c/p\u003e\n\u003cp\u003eThis was also rendered on a different parent DOM element, and it gets its data to the same global state as well.\u003c/p\u003e\n\u003ch3\u003eHow the components communicate?\u003c/h3\u003e\n\u003cp\u003eSo the question is how I connect these three components and make them share the same global state?\u003c/p\u003e\n\u003cp\u003eWell, React has a feature called \u003ca href=\"https://reactjs.org/docs/portals.html\" target=\"_blank\" rel=\"noopener\"\u003ePortals\u003c/a\u003e, you can create different React components and attached them to a different parent element. Basically, this portal serves as a bridge to these separated components so they can still communicate (in a way).\u003c/p\u003e\n\u003cp\u003eIn my case, I just created different portals by using the \u0026#8220;createPortal\u0026#8221; method and enclosed all the components into the context provider. By doing this, even though they are separated they will still share the global state.\u003c/p\u003e\n\u003cp\u003eTo be honest, I can\u0026#8217;t remember what is the exact reason why I came up with this approach. As far as I can remember, my first solution was to depend only on every update of my global state in Local Storage.\u003c/p\u003e\n\u003cp\u003eThat solution was not working, I\u0026#8217;m not sure why. When I tried testing it by adding a new product enquiry, the overview widget in the header was not updating in real-time. The overview widget will only update after the next product enquiry submission, some sort of a delayed update.\u003c/p\u003e\n\u003cp\u003eWell, I have deadlines to meet, I need a better solution and Portals help me with these issues.\u003c/p\u003e\n\u003ch3\u003eLimitations:\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eForm input generator was dependent on ACF.\u003c/li\u003e\n\u003cli\u003eThere is no remove functionality on the overview widget.\u003c/li\u003e\n\u003c/ul\u003e\n","techStacks":"React JS, React Context, React Hooks, Formik","excerpt":"Developed for a home-improvement company in Australia. These three separated widgets are part of their website which provides a custom product enquiry process.","featuredImg":"https://cms.egoymagnaye.com/wp-content/uploads/2021/02/enquiry-featured-image.jpg","previewImg":"https://cms.egoymagnaye.com/wp-content/uploads/2021/02/enquiry-preview-image.jpg"}},"__N_SSG":true},"page":"/portfolio/[slug]","query":{"slug":"custom-product-enquiry-react-widgets"},"buildId":"D4IoryYLCJZTII7BP1wqv","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-52984adb74ea67b4d3d2.js"></script><script src="/_next/static/chunks/main-274e6b525957340b0588.js" async=""></script><script src="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" async=""></script><script src="/_next/static/chunks/framework.daa7383ad2ab2e6757c1.js" async=""></script><script src="/_next/static/chunks/cb1608f2.c060290bec9c78d41bf3.js" async=""></script><script src="/_next/static/chunks/commons.fa36d27f7d7b64de1790.js" async=""></script><script src="/_next/static/chunks/pages/_app-9e9cff3d9f4212e0a036.js" async=""></script><script src="/_next/static/chunks/ae51ba48.5fdd52c1eb8934f67dab.js" async=""></script><script src="/_next/static/chunks/9c6acb7e1cb5d034899bd31812f4cd0223d947e5.cad86647c1e28bf2c1b0.js" async=""></script><script src="/_next/static/chunks/pages/portfolio/%5Bslug%5D-b62cd7b34995a3172920.js" async=""></script><script src="/_next/static/D4IoryYLCJZTII7BP1wqv/_buildManifest.js" async=""></script><script src="/_next/static/D4IoryYLCJZTII7BP1wqv/_ssgManifest.js" async=""></script></body></html>